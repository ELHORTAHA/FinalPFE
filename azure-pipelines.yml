# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main


pool:
  name: Dev
  demands:
    - npm
    - Agent.Version

steps:
- script: |
    echo "Checking agent version..."
    AGENT_VERSION=$(agent.version)
    REQUIRED_VERSION="2.163.1"
    if [ "$AGENT_VERSION" \> "$REQUIRED_VERSION" ]; then
      echo "Agent version is sufficient: $AGENT_VERSION"
    else
      echo "Agent version is too low: $AGENT_VERSION. Required: $REQUIRED_VERSION"
      exit 1
    fi
  displayName: 'Check agent version'

- script: npm install
  displayName: 'Install npm packages'



- script: |
    echo Add other tasks to build, test, and deploy your project.
    echo See https://aka.ms/yaml
  displayName: 'Run a multi-line script'

- task: UiPathPack@4
  inputs:
    versionType: 'AutoVersion'
    projectJsonPath: 'project.json'
    outputPath: '$(Build.ArtifactStagingDirectory)\Output'